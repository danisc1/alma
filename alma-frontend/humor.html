<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Registrar Humor - ALMA</title>
</head>
<body>
  <h1>Registrar Humor</h1>
  <button onclick="logout()">Logout</button>
  <form id="formHumor">
    <label>Nota (1 a 5):
      <input type="number" id="nota" min="1" max="5" required />
    </label><br />
    <label>Coment√°rio:
      <textarea id="comentario"></textarea>
    </label><br />
    <button type="submit">Registrar</button>
  </form>
  <p id="msgErro" style="color:red;"></p>
  <p id="msgSucesso" style="color:green;"></p>

  <script src="script.js"></script>
  <script>
    protegerPagina();

    const form = document.getElementById('formHumor');
    const msgErro = document.getElementById('msgErro');
    const msgSucesso = document.getElementById('msgSucesso');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msgErro.textContent = '';
      msgSucesso.textContent = '';

      const nota = Number(form.nota.value);
      const comentario = form.comentario.value.trim();

      const res = await registrarHumor(nota, comentario);
      if (res.sucesso) {
        msgSucesso.textContent = 'Humor registrado com sucesso!';
        form.reset();
      } else {
        msgErro.textContent = res.erro;
      }
    });
  </script>
</body>
</html>
